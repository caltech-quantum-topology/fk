.TH FK 1 "2024" "fkcompute 0.2.0" "User Commands"
.SH NAME
fk \- compute the FK invariant for braids using inversion, ILP reduction, and compiled helper binary
.SH SYNOPSIS
.B fk
.I simple
.I BRAID DEGREE
.br
.B fk
.I preset
.I BRAID DEGREE
.RB [ \-\-preset
.IR PRESET ]
.br
.B fk
.I config
.I CONFIG_FILE
.br
.B fk
.I advanced
.I BRAID DEGREE
.RI [ OPTIONS... ]
.br
.B fk
.I BRAID DEGREE
.RI [ OPTIONS... ]
.SH DESCRIPTION
.B fk
computes the FK invariant of braids using a combination of inversion assignments, Integer Linear Programming (ILP) reduction, and optimized C++ computation. The program provides multiple interfaces ranging from simple one-line calls to advanced configuration with full parameter control.

The FK invariant is a mathematical object used in knot theory to distinguish different types of knots and links. This implementation uses parallel processing and optimization techniques to make the computation efficient for complex braids.

.SH SUBCOMMANDS
.TP
.B simple
Minimal interface with sensible defaults. Computes the FK invariant using quiet mode and default parameters. Best for quick calculations.
.TP
.B preset
Uses predefined configuration sets optimized for different use cases. Available presets are:
.RS
.IP \(bu 2
.B fast
\- Single-threaded, limited shifts, no flip symmetry (fastest)
.IP \(bu 2
.B accurate
\- Multi-core, unlimited shifts, no flip symmetry, saves data (most thorough)
.IP \(bu 2
.B parallel
\- High parallelism, balanced settings, no flip symmetry (best for multi-core systems)
.RE
.TP
.B config
Loads all parameters from a JSON or YAML configuration file. Supports both single computations and batch processing of multiple braids with shared defaults.
.TP
.B advanced
Full control over all computation parameters. Equivalent to the legacy interface without subcommands.
.SH ARGUMENTS
.TP
.I BRAID
The braid word as a list of integers. Accepts multiple formats:
.RS
.IP \(bu 2
JSON-style: "[1, -2, -3, 1]"
.IP \(bu 2
Comma-separated: "1,-2,-3,1"
.IP \(bu 2
Space-separated: "1 -2 -3 1"
.RE
.TP
.I DEGREE
Degree of the invariant computation (positive integer).
.TP
.I CONFIG_FILE
Path to JSON or YAML configuration file containing braid, degree, and other parameters.
.SH OPTIONS
The following options are available for the
.B advanced
subcommand and legacy mode:
.TP
.BR \-\-preset\ \fIPRESET\fR
Use predefined configuration. Choices: fast, accurate, parallel.
.TP
.BR \-\-ilp\-file\ \fIFILE\fR
Path to a precomputed ILP file.
.TP
.BR \-\-ilp\ \fIDATA\fR
ILP data as a raw string (advanced usage).
.TP
.BR \-\-inversion\-file\ \fIFILE\fR
Path to precomputed inversion JSON file.
.TP
.BR \-\-partial\-signs\ \fISIGNS\fR
Optional partial sign assignments. Same formats as BRAID.
.TP
.BR \-\-max\-workers\ \fIN\fR
Number of parallel workers for inversion calculation (default: 1).
.TP
.BR \-\-chunk\-size\ \fIN\fR
Chunk size for parallel tasks (default: 16384).
.TP
.BR \-\-max\-shifts\ \fIN\fR
Maximum shifts considered in inversion calculation.
.TP
.BR \-\-verbose ", " \-\-no\-verbose
Enable or disable verbose logging (default: disabled).
.TP
.BR \-\-include\-flip ", " \-\-no\-include\-flip
Include or exclude flip symmetry in inversion (default: disabled).
.TP
.BR \-\-save\-data ", " \-\-no\-save\-data
Save or don't save intermediate files (default: disabled).
.TP
.BR \-\-print\-result ", " \-\-no\-print\-result
Print or suppress the result output (default: enabled).
.TP
.BR \-\-symbolic ", " \-\-no\-symbolic
Output result as human-readable symbolic polynomial using SymPy (default: disabled). Requires SymPy to be installed.
.TP
.BR \-\-save\-dir\ \fIDIR\fR
Directory to store data when \-\-save\-data is enabled (default: "data").
.TP
.BR \-\-link\-name\ \fINAME\fR
Base name for output files without extension.
.SH EXAMPLES
.SS Simple Usage
.nf
# Basic computation with defaults
fk simple "[1, -2, -2, 3]" 3

# With symbolic polynomial output
fk simple "[1, -2, -2, 3]" 3 --symbolic

# Same braid, different input formats
fk simple "1,-2,-2,3" 3
fk simple "1 -2 -2 3" 3
.fi
.SS Preset Usage
.nf
# Fast computation (single-threaded, limited)
fk preset "[1, -2, 3]" 2 --preset fast

# Thorough computation (multi-core, saves data)
fk preset "[1, -2, 3]" 2 --preset accurate

# Parallel optimized with symbolic output
fk preset "[1, -2, 3]" 2 --preset parallel --symbolic
.fi
.SS Configuration File
.nf
# Create config.yaml
cat > config.yaml << EOF
braid: [1, -2, -2, 3]
degree: 3
preset: accurate
max_workers: 8
symbolic: true
verbose: true
EOF

# Run from config
fk config config.yaml
.fi
.SS Advanced Usage
.nf
# Full parameter control
fk advanced "[1, -2, 3]" 2 \\
  --max-workers 4 \\
  --verbose \\
  --save-data \\
  --symbolic \\
  --save-dir results \\
  --link-name trefoil

# Legacy mode (backward compatibility)
fk "[1, -2, 3]" 2 --max-workers 4
.fi
.SH CONFIGURATION FILES
Configuration files can be in JSON or YAML format. YAML requires PyYAML to be installed.
Supports both single computations and batch processing.

.SS Single Computation (JSON)
.nf
{
  "braid": [1, -2, -2, 3],
  "degree": 3,
  "preset": "accurate",
  "max_workers": 4,
  "verbose": true
}
.fi
.SS Batch Processing (YAML)
.nf
# Global defaults applied to all computations
preset: fast
max_workers: 4
save_data: true

computations:
  - name: trefoil
    braid: [1, 1, 1]
    degree: 2

  - name: figure_eight
    braid: [1, -2, -1, 2]
    degree: 3
    preset: accurate  # Override global preset

  - name: hopf_link
    braid: [1, 1]
    degree: 2
    max_workers: 8  # Override global workers
.fi

.SS Batch Processing Features
.IP \(bu 2
Global configuration applied to all computations
.IP \(bu 2
Individual computation overrides for any parameter
.IP \(bu 2
Named computations for organized results
.IP \(bu 2
Progress tracking during execution
.IP \(bu 2
Error handling - continues processing if one computation fails
.SH OUTPUT
The program outputs comprehensive computation results as JSON to stdout, including the braid, inversion data, degree, components count, and FK invariant coefficients. When the \-\-symbolic flag is used, human-readable polynomial expressions are shown instead.

.SS Single Computation Output
.nf
{
  "braid": [1, -2, -2, 3],
  "inversion_data": {
    "0": [1, -1, 1],
    "1": [1, 1, -1],
    "2": [-1, 1, 1]
  },
  "degree": 3,
  "components": 4,
  "fk": [
    [[-2, 1], [0, -1], [2, 1]]
  ]
}
.fi

.SS Batch Processing Output
.nf
{
  "trefoil": {
    "braid": [1, 1, 1],
    "inversion_data": {...},
    "degree": 2,
    "fk": {
      "q^-2": 1,
      "q^0": -1,
      "q^2": 1
    }
  },
  "figure_eight": {
    "braid": [1, -2, 1, -2],
    "inversion_data": {...},
    "degree": 3,
    "fk": {
      "q^-1": -1,
      "q^1": -1,
      "q^3": 1
    }
  }
}
.fi

.SS Symbolic Output
When using the \-\-symbolic flag, output appears as human-readable polynomial expressions:
.nf
q - q^3 + x^2*(-q^2 + q^6)
.fi

Variables are chosen based on braid topology:
.IP \(bu 2
1 component: x
.IP \(bu 2
2 components: x, y
.IP \(bu 2
3+ components: a, b, c, d, ... (skipping 'q')

.SS Output Fields
.TP
.B braid
The braid word used in the computation (may be modified during processing)
.TP
.B inversion_data
Dictionary mapping crossing indices to sign assignments from the inversion computation
.TP
.B degree
The degree parameter used for the invariant computation
.TP
.B components
Number of components/strands in the braid topology
.TP
.B fk
FK invariant coefficient matrix as nested lists of [power, coefficient] pairs
.TP
.B symbolic
Human-readable polynomial representation (only present when \-\-symbolic is used)
.SH FILES
.TP
.I data/
Default directory for saved intermediate files when using \-\-save\-data.
.TP
.I *_inversion.json
Saved inversion data files.
.TP
.I *_ilp.csv
Saved ILP problem files.
.SH DEPENDENCIES
.TP
.B Required
Python 3.9+, NumPy, Gurobi (commercial optimization solver), C++ toolchain for compilation
.TP
.B Optional
SymPy 1.10+ (for symbolic polynomial output), PyYAML (for YAML configuration files), Jupyter (for development)
.SH EXIT STATUS
.TP
0
Success
.TP
1
General error (invalid arguments, computation failure, etc.)
.TP
2
File not found (configuration file, binary, etc.)
.SH AUTHORS
Toby, Paul, Lara, Davide
.SH SEE ALSO
.BR python (1),
.BR cmake (1),
.BR gurobi (1)

Online documentation: https://github.com/your-repo/fk-compute
.SH COPYRIGHT
This is free software under the MIT License.
